<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng Qu·∫£n L√Ω Kho</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- SIDEBAR -->
    <div class="sidebar">
        <h2>Inventory</h2>
        <ul>
            <li data-section="dashboard">
                <i class="fas fa-chart-line"></i>
                Dashboard
            </li>
            <li data-section="devices">
                <i class="fas fa-laptop"></i>
                Danh M·ª•c Thi·∫øt B·ªã
            </li>
            <li data-section="transactions">
                <i class="fas fa-exchange-alt"></i>
                Nh·∫≠p/Xu·∫•t Kho
            </li>
            <li data-section="history">
                <i class="fas fa-history"></i>
                L·ªãch S·ª≠
            </li>
            <li data-section="alerts">
                <i class="fas fa-bell"></i>
                C·∫£nh B√°o
            </li>
            <li data-section="payments">
                <i class="fas fa-money-bill-wave"></i>
                Thanh To√°n
            </li>
        </ul>
    </div>

    <!-- MAIN CONTENT -->
    <div class="main-content">
        <!-- DASHBOARD -->
        <div class="section active" id="dashboard">
            <h2>üìä Dashboard</h2>
            <div class="dashboard-cards">
                <div class="card">T·ªïng thi·∫øt b·ªã: <span id="total-devices">0</span></div>
                <div class="card">Nh·∫≠p th√°ng n√†y: <span id="imported-this-month">0</span></div>
                <div class="card">Xu·∫•t th√°ng n√†y: <span id="exported-this-month">0</span></div>
                <div class="card">Thi·∫øt b·ªã s·∫Øp h·∫øt: <span id="low-stock-devices">0</span></div>
            </div>
            <canvas id="stockChart"></canvas>
        </div>

        <!-- DANH M·ª§C THI·∫æT B·ªä -->
        <div class="section" id="devices">
            <h2>üì¶ Danh M·ª•c Thi·∫øt B·ªã</h2>
            <button class="add-btn">+ Th√™m Thi·∫øt B·ªã</button>
            <button class="import-btn">üì• Import Excel</button>
            <button class="export-btn">üì§ Xu·∫•t Excel</button>
            <button class="pdf-btn">üìÑ Xu·∫•t PDF</button>
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>M√£</th>
                            <th>T√™n</th>
                            <th>S·ªë l∆∞·ª£ng</th>
                            <th>H√†nh ƒë·ªông</th>
                        </tr>
                    </thead>
                    <tbody id="devices-table"></tbody>
                </table>
            </div>
        </div>

        <!-- Transactions Section -->
        <div id="transactions" class="section">
            <div class="section-header">
                <h2><i class="fas fa-exchange-alt"></i> Qu·∫£n l√Ω Nh·∫≠p/Xu·∫•t Kho</h2>
            </div>

            <div class="transaction-form">
                <!-- Transaction Type Selection -->
                <div class="transaction-type">
                    <button class="active" data-type="import">
                        <i class="fas fa-arrow-down"></i> Nh·∫≠p Kho
                    </button>
                    <button data-type="export">
                        <i class="fas fa-arrow-up"></i> Xu·∫•t Kho
                    </button>
                </div>

                <!-- Transaction Details -->
                <div class="transaction-details">
                    <div class="form-group">
                        <label for="warehouse">Kho</label>
                        <select id="warehouse" required>
                            <option value="">Ch·ªçn kho</option>
                            <option value="warehouse1">Kho 1</option>
                            <option value="warehouse2">Kho 2</option>
                            <option value="warehouse3">Kho 3</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="transaction-date">Ng√†y giao d·ªãch</label>
                        <input type="date" id="transaction-date" required>
                    </div>

                    <!-- Product Selection -->
                    <div class="form-group">
                        <label>Ch·ªçn thi·∫øt b·ªã</label>
                        <div class="product-selection">
                            <div class="form-group">
                                <select id="device-select">
                                    <option value="">Ch·ªçn thi·∫øt b·ªã</option>
                                    <option value="device1">Thi·∫øt b·ªã 1</option>
                                    <option value="device2">Thi·∫øt b·ªã 2</option>
                                    <option value="device3">Thi·∫øt b·ªã 3</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <input type="number" id="quantity" placeholder="S·ªë l∆∞·ª£ng" min="1">
                            </div>
                            <button onclick="addProduct()">
                                <i class="fas fa-plus"></i> Th√™m
                            </button>
                        </div>
                    </div>

                    <!-- Selected Products Table -->
                    <div class="selected-products">
                        <table>
                            <thead>
                                <tr>
                                    <th>M√£ thi·∫øt b·ªã</th>
                                    <th>T√™n thi·∫øt b·ªã</th>
                                    <th>S·ªë l∆∞·ª£ng</th>
                                    <th>ƒê∆°n v·ªã</th>
                                    <th></th>
                                </tr>
                            </thead>
                            <tbody id="selected-products-list">
                                <!-- Products will be added here dynamically -->
                            </tbody>
                        </table>
                    </div>

                    <!-- Supplier/Receiver Information -->
                    <div class="form-group">
                        <label for="supplier">Nh√† cung c·∫•p/Ng∆∞·ªùi nh·∫≠n</label>
                        <input type="text" id="supplier" placeholder="Nh·∫≠p t√™n nh√† cung c·∫•p ho·∫∑c ng∆∞·ªùi nh·∫≠n">
                    </div>

                    <div class="form-group">
                        <label for="notes">Ghi ch√∫</label>
                        <textarea id="notes" rows="3" placeholder="Nh·∫≠p ghi ch√∫ n·∫øu c√≥"></textarea>
                    </div>
                </div>

                <!-- Transaction Summary -->
                <div class="transaction-summary">
                    <div class="total-items">
                        T·ªïng s·ªë m·∫∑t h√†ng: <span id="total-items">0</span>
                    </div>
                    <div class="action-buttons">
                        <button class="save-draft">
                            <i class="fas fa-save"></i> L∆∞u nh√°p
                        </button>
                        <button class="complete-transaction">
                            <i class="fas fa-check"></i> Ho√†n t·∫•t
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- L·ªäCH S·ª¨ GIAO D·ªäCH -->
        <div class="section" id="history">
            <div class="section-header">
                <h2><i class="fas fa-history"></i> L·ªãch S·ª≠ Giao D·ªãch</h2>
            </div>

            <!-- B·ªô l·ªçc -->
            <div class="history-filters">
                <div class="filter-group">
                    <label>Th·ªùi gian:</label>
                    <div class="date-filters">
                        <button class="filter-btn active" data-period="all">T·∫•t c·∫£</button>
                        <button class="filter-btn" data-period="today">H√¥m nay</button>
                        <button class="filter-btn" data-period="week">Tu·∫ßn n√†y</button>
                        <button class="filter-btn" data-period="month">Th√°ng n√†y</button>
                        <div class="custom-date">
                            <input type="date" id="start-date" placeholder="T·ª´ ng√†y">
                            <input type="date" id="end-date" placeholder="ƒê·∫øn ng√†y">
                            <button class="apply-date">√Åp d·ª•ng</button>
                        </div>
                    </div>
                </div>
                
                <div class="filter-row">
                    <div class="filter-group">
                        <label for="transaction-type-filter">Lo·∫°i giao d·ªãch:</label>
                        <select id="transaction-type-filter">
                            <option value="all">T·∫•t c·∫£</option>
                            <option value="import">Nh·∫≠p kho</option>
                            <option value="export">Xu·∫•t kho</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="product-filter">S·∫£n ph·∫©m:</label>
                        <select id="product-filter">
                            <option value="all">T·∫•t c·∫£ s·∫£n ph·∫©m</option>
                        </select>
                    </div>

                    <div class="filter-group">
                        <label for="warehouse-filter">Kho:</label>
                        <select id="warehouse-filter">
                            <option value="all">T·∫•t c·∫£ kho</option>
                            <option value="warehouse1">Kho 1</option>
                            <option value="warehouse2">Kho 2</option>
                            <option value="warehouse3">Kho 3</option>
                        </select>
                    </div>
                </div>
            </div>

            <!-- Th·ªëng k√™ t·ªïng quan -->
            <div class="history-summary">
                <div class="summary-card">
                    <div class="card-icon"><i class="fas fa-arrow-down"></i></div>
                    <div class="card-content">
                        <h3>T·ªïng nh·∫≠p</h3>
                        <p id="total-import">0</p>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="card-icon"><i class="fas fa-arrow-up"></i></div>
                    <div class="card-content">
                        <h3>T·ªïng xu·∫•t</h3>
                        <p id="total-export">0</p>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="card-icon"><i class="fas fa-exchange-alt"></i></div>
                    <div class="card-content">
                        <h3>T·ªïng giao d·ªãch</h3>
                        <p id="total-transactions">0</p>
                    </div>
                </div>
                <div class="summary-card">
                    <div class="card-icon"><i class="fas fa-box"></i></div>
                    <div class="card-content">
                        <h3>S·∫£n ph·∫©m</h3>
                        <p id="total-products">0</p>
                    </div>
                </div>
            </div>

            <!-- B·∫£ng l·ªãch s·ª≠ -->
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>M√£ GD</th>
                            <th>Th·ªùi gian</th>
                            <th>Lo·∫°i</th>
                            <th>Kho</th>
                            <th>S·∫£n ph·∫©m</th>
                            <th>S·ªë l∆∞·ª£ng</th>
                            <th>Ng∆∞·ªùi th·ª±c hi·ªán</th>
                            <th>Ghi ch√∫</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="history-table"></tbody>
                </table>
            </div>

            <!-- Ph√¢n trang -->
            <div class="pagination">
                <button id="prev-page" disabled><i class="fas fa-chevron-left"></i></button>
                <span id="page-info">Trang 1 / 1</span>
                <button id="next-page"><i class="fas fa-chevron-right"></i></button>
            </div>

            <!-- Modal xem chi ti·∫øt giao d·ªãch -->
            <div id="transaction-detail-modal" class="modal">
                <div class="modal-content">
                    <h2>Chi ti·∫øt giao d·ªãch</h2>
                    <div id="transaction-detail-content"></div>
                    <div class="modal-actions">
                        <button class="btn" onclick="closeTransactionDetail()">ƒê√≥ng</button>
                        <button class="btn primary-btn" onclick="exportTransactionDetail()">
                            <i class="fas fa-download"></i> Xu·∫•t PDF
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- C·∫¢NH B√ÅO & TH√îNG B√ÅO -->
        <div class="section" id="alerts">
            <div class="alerts-header">
                <h2><i class="fas fa-bell"></i> C·∫£nh B√°o & Th√¥ng B√°o</h2>
                <div class="alerts-actions">
                    <button class="btn" onclick="markAllAsRead()">
                        <i class="fas fa-check-double"></i> ƒê√°nh d·∫•u t·∫•t c·∫£ ƒë√£ ƒë·ªçc
                    </button>
                    <button class="btn primary-btn" onclick="showAlertSettings()">
                        <i class="fas fa-cog"></i> C√†i ƒë·∫∑t th√¥ng b√°o
                    </button>
                </div>
            </div>

            <div class="alert-filters">
                <div class="filter-group">
                    <label>Lo·∫°i c·∫£nh b√°o</label>
                    <div class="filter-buttons alert-type-filters">
                        <button class="filter-btn active" data-type="all">T·∫•t c·∫£</button>
                        <button class="filter-btn" data-type="low-stock">S·∫Øp h·∫øt h√†ng</button>
                        <button class="filter-btn" data-type="inventory">T·ªìn kho</button>
                        <button class="filter-btn" data-type="transaction">Giao d·ªãch</button>
                        <button class="filter-btn" data-type="system">H·ªá th·ªëng</button>
                    </div>
                </div>
                <div class="filter-group">
                    <label>M·ª©c ƒë·ªô</label>
                    <div class="filter-buttons alert-severity-filters">
                        <button class="filter-btn active" data-severity="all">T·∫•t c·∫£</button>
                        <button class="filter-btn" data-severity="high">Cao</button>
                        <button class="filter-btn" data-severity="medium">Trung b√¨nh</button>
                        <button class="filter-btn" data-severity="low">Th·∫•p</button>
                    </div>
                </div>
            </div>

            <div class="alerts-list">
                <div class="alert-group">
                    <div class="alert-group-header">
                        <span>C·∫£nh b√°o s·∫Øp h·∫øt h√†ng</span>
                        <span class="alert-count">0</span>
                    </div>
                    <div id="low-stock-alerts"></div>
                </div>

                <div class="alert-group">
                    <div class="alert-group-header">
                        <span>C·∫£nh b√°o t·ªìn kho</span>
                        <span class="alert-count">0</span>
                    </div>
                    <div id="inventory-alerts"></div>
                </div>

                <div class="alert-group">
                    <div class="alert-group-header">
                        <span>C·∫£nh b√°o giao d·ªãch</span>
                        <span class="alert-count">0</span>
                    </div>
                    <div id="transaction-alerts"></div>
                </div>

                <div class="alert-group">
                    <div class="alert-group-header">
                        <span>Th√¥ng b√°o h·ªá th·ªëng</span>
                        <span class="alert-count">0</span>
                    </div>
                    <div id="system-alerts"></div>
                </div>
            </div>
        </div>

        <!-- Alert Settings Modal -->
        <div id="alert-settings-modal" class="modal">
            <div class="modal-content alert-settings-modal">
                <div class="modal-header">
                    <h2><i class="fas fa-cog"></i> C√†i ƒë·∫∑t th√¥ng b√°o</h2>
                    <span class="close" onclick="closeAlertSettings()">&times;</span>
                </div>
                <div class="modal-body">
                    <form id="alert-settings-form">
                        <div class="settings-form-group">
                            <label for="low-stock-threshold">Ng∆∞·ª°ng c·∫£nh b√°o s·∫Øp h·∫øt h√†ng</label>
                            <input type="number" id="low-stock-threshold" min="1" value="10">
                        </div>

                        <div class="settings-form-group">
                            <label for="large-change-threshold">Ng∆∞·ª°ng c·∫£nh b√°o thay ƒë·ªïi l·ªõn (%)</label>
                            <input type="number" id="large-change-threshold" min="1" max="100" value="50">
                        </div>

                        <div class="settings-form-group">
                            <label>Ph∆∞∆°ng th·ª©c th√¥ng b√°o</label>
                            <div class="notification-methods">
                                <label class="notification-method">
                                    <input type="checkbox" checked> Tr√™n h·ªá th·ªëng
                                </label>
                                <label class="notification-method">
                                    <input type="checkbox" checked> Email
                                </label>
                                <label class="notification-method">
                                    <input type="checkbox"> SMS
                                </label>
                            </div>
                        </div>

                        <div class="settings-form-group">
                            <label for="check-frequency">T·∫ßn su·∫•t ki·ªÉm tra</label>
                            <select id="check-frequency" class="form-control">
                                <option value="realtime">Th·ªùi gian th·ª±c</option>
                                <option value="hourly">M·ªói gi·ªù</option>
                                <option value="daily">M·ªói ng√†y</option>
                                <option value="weekly">M·ªói tu·∫ßn</option>
                            </select>
                        </div>

                        <div class="modal-footer">
                            <button type="button" class="btn" onclick="closeAlertSettings()">H·ªßy</button>
                            <button type="submit" class="btn primary-btn">L∆∞u c√†i ƒë·∫∑t</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- QU·∫¢N L√ù THANH TO√ÅN -->
        <div class="section" id="payments">
            <div class="section-header">
                <h2>üí∞ Qu·∫£n L√Ω Thanh To√°n</h2>
                <div class="action-buttons">
                    <button id="add-payment-btn" onclick="showAddPaymentModal()" class="btn primary-btn">
                        <span class="btn-icon">‚ûï</span> Th√™m thanh to√°n
                    </button>
                    <button id="import-payment-btn" class="btn">
                        <span class="btn-icon">üì•</span> Import Excel
                    </button>
                    <button id="export-payment-btn" class="btn">
                        <span class="btn-icon">üì§</span> Export Excel
                    </button>
                </div>
            </div>

            <!-- B·∫£ng thanh to√°n -->
            <div class="table-container">
                <table>
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Kh√°ch h√†ng</th>
                            <th>S·ªë ti·ªÅn</th>
                            <th>Ng√†y</th>
                            <th>Ph∆∞∆°ng th·ª©c</th>
                            <th>Tr·∫°ng th√°i</th>
                            <th>Thao t√°c</th>
                        </tr>
                    </thead>
                    <tbody id="payment-table"></tbody>
                </table>
            </div>

            <!-- Modal th√™m/s·ª≠a thanh to√°n -->
            <div id="payment-modal" class="modal">
                <div class="modal-content">
                    <h2 id="payment-modal-title">Th√™m thanh to√°n m·ªõi</h2>
                    <form id="payment-form" onsubmit="handlePaymentSubmit(event)">
                        <div class="form-group">
                            <label for="customer">Kh√°ch h√†ng *</label>
                            <input type="text" id="customer" name="customer" required>
                        </div>
                        <div class="form-group">
                            <label for="amount">S·ªë ti·ªÅn *</label>
                            <input type="number" id="amount" name="amount" min="0" required>
                        </div>
                        <div class="form-group">
                            <label for="method">Ph∆∞∆°ng th·ª©c thanh to√°n *</label>
                            <select id="method" name="method" required>
                                <option value="cash">Ti·ªÅn m·∫∑t</option>
                                <option value="bank">Chuy·ªÉn kho·∫£n</option>
                                <option value="card">Th·∫ª t√≠n d·ª•ng</option>
                                <option value="e-wallet">V√≠ ƒëi·ªán t·ª≠</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="status">Tr·∫°ng th√°i *</label>
                            <select id="status" name="status" required>
                                <option value="completed">ƒê√£ thanh to√°n</option>
                                <option value="pending">Ch·ªù x·ª≠ l√Ω</option>
                                <option value="failed">Th·∫•t b·∫°i</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="note">Ghi ch√∫</label>
                            <textarea id="note" name="note" rows="3"></textarea>
                        </div>
                        <div class="form-actions">
                            <button type="button" onclick="document.getElementById('payment-modal').style.display='none'" class="btn">H·ªßy</button>
                            <button type="submit" class="btn primary-btn">L∆∞u</button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Modal xem chi ti·∫øt thanh to√°n -->
            <div id="view-payment-modal" class="modal"></div>
        </div>
    </div>

    <!-- SCRIPT -->
    <script src="script.js"></script>
</body>
</html>
