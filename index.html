<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω kho</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="main-container">
        <aside class="sidebar">
            <div class="logo">
                <h1>Qu·∫£n l√Ω kho</h1>
            </div>
            <ul>
                <li data-section="dashboard" class="active">
                    <i class="fas fa-chart-line"></i> Dashboard
                </li>
                <li data-section="devices">
                    <i class="fas fa-laptop"></i> Danh M·ª•c Thi·∫øt B·ªã
                </li>
                <li data-section="transactions">
                    <i class="fas fa-exchange-alt"></i> Nh·∫≠p/Xu·∫•t Kho
                </li>
                <li data-section="history">
                    <i class="fas fa-history"></i> L·ªãch S·ª≠
                </li>
                <li data-section="alerts">
                    <i class="fas fa-bell"></i> C·∫£nh B√°o
                </li>
                <li data-section="payments">
                    <i class="fas fa-money-bill"></i> Thanh To√°n
                </li>
            </ul>
        </aside>

        <main class="content-area">
            <!-- Dashboard Section -->
            <section id="dashboard" class="section active">
                <h2>Dashboard</h2>
                <div class="stats-cards">
                    <div class="stats-card">
                        <h3>T·ªïng thi·∫øt b·ªã</h3>
                        <p id="total-devices">80</p>
                    </div>
                    <div class="stats-card">
                        <h3>Nh·∫≠p th√°ng n√†y</h3>
                        <p id="imported-this-month">20</p>
                    </div>
                    <div class="stats-card">
                        <h3>Xu·∫•t th√°ng n√†y</h3>
                        <p id="exported-this-month">10</p>
                    </div>
                    <div class="stats-card">
                        <h3>Thi·∫øt b·ªã s·∫Øp h·∫øt</h3>
                        <p id="low-stock-devices">5</p>
                    </div>
                </div>

                <div class="chart-grid">
                    <div class="chart-container">
                        <h3>Xu h∆∞·ªõng t·ªìn kho</h3>
                        <div class="chart-wrapper">
                            <canvas id="stockTrendChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-container">
                        <h3>Ph√¢n b·ªë danh m·ª•c</h3>
                        <div class="chart-wrapper">
                            <canvas id="categoryDistributionChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-container">
                        <h3>D·ª± b√°o nhu c·∫ßu</h3>
                        <div class="chart-wrapper">
                            <canvas id="demandForecastChart"></canvas>
                        </div>
                    </div>
                    <div class="chart-container">
                        <h3>T·ª∑ l·ªá nh·∫≠p/xu·∫•t</h3>
                        <div class="chart-wrapper">
                            <canvas id="importExportRatioChart"></canvas>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Devices Section -->
            <section id="devices" class="section">
                <h2>Danh M·ª•c Thi·∫øt B·ªã</h2>
                
                <!-- Device Statistics -->
                <div class="device-stats">
                    <div class="stat-card">
                        <div class="stat-icon">üì¶</div>
                        <div class="stat-content">
                            <h3>T·ªïng thi·∫øt b·ªã</h3>
                            <p id="total-devices-count">80</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">‚ö†Ô∏è</div>
                        <div class="stat-content">
                            <h3>S·∫Øp h·∫øt h√†ng</h3>
                            <p id="low-stock-count">5</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üìä</div>
                        <div class="stat-content">
                            <h3>ƒêang t·ªìn kho</h3>
                            <p id="in-stock-count">75</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üè∑Ô∏è</div>
                        <div class="stat-content">
                            <h3>Danh m·ª•c</h3>
                            <p id="category-count">4</p>
                        </div>
                    </div>
                </div>

                <!-- Device Filters -->
                <div class="device-filters">
                    <div class="search-box">
                        <input type="text" id="device-search" placeholder="T√¨m ki·∫øm thi·∫øt b·ªã...">
                        <i class="fas fa-search"></i>
                    </div>
                    <div class="filter-group">
                        <select id="category-filter">
                            <option value="">T·∫•t c·∫£ danh m·ª•c</option>
                            <option value="laptop">Laptop</option>
                            <option value="desktop">Desktop</option>
                            <option value="printer">M√°y in</option>
                            <option value="network">Thi·∫øt b·ªã m·∫°ng</option>
                        </select>
                        <select id="status-filter">
                            <option value="">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                            <option value="in-stock">C√≤n h√†ng</option>
                            <option value="low-stock">S·∫Øp h·∫øt</option>
                            <option value="out-of-stock">H·∫øt h√†ng</option>
                        </select>
                        <select id="sort-by">
                            <option value="name">S·∫Øp x·∫øp theo t√™n</option>
                            <option value="quantity">S·∫Øp x·∫øp theo s·ªë l∆∞·ª£ng</option>
                            <option value="price">S·∫Øp x·∫øp theo gi√°</option>
                        </select>
                    </div>
                    <button class="add-device-btn" onclick="showAddDeviceModal()">
                        <i class="fas fa-plus"></i> Th√™m thi·∫øt b·ªã
                    </button>
                </div>

                <!-- Device Table -->
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>M√£</th>
                                <th>T√™n thi·∫øt b·ªã</th>
                                <th>Danh m·ª•c</th>
                                <th>S·ªë l∆∞·ª£ng</th>
                                <th>ƒê∆°n gi√°</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="devices-table"></tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination">
                    <button id="prev-page" disabled>Tr∆∞·ªõc</button>
                    <span id="page-info">Trang 1 / 1</span>
                    <button id="next-page" disabled>Sau</button>
                </div>
            </section>

            <!-- Transactions Section -->
            <section id="transactions" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-exchange-alt"></i> Nh·∫≠p/Xu·∫•t Kho</h2>
                    <div class="header-actions">
                        <button onclick="addTransaction('import')" class="btn primary-btn">
                            <i class="fas fa-plus"></i> Nh·∫≠p kho
                        </button>
                        <button onclick="addTransaction('export')" class="btn primary-btn">
                            <i class="fas fa-minus"></i> Xu·∫•t kho
                        </button>
                    </div>
                </div>

                <div class="transaction-stats">
                    <div class="stats-cards">
                        <div class="stats-card">
                            <h3>Nh·∫≠p kho th√°ng n√†y</h3>
                            <p id="monthly-import">0</p>
                        </div>
                        <div class="stats-card">
                            <h3>Xu·∫•t kho th√°ng n√†y</h3>
                            <p id="monthly-export">0</p>
                        </div>
                        <div class="stats-card">
                            <h3>T·ªïng gi√° tr·ªã nh·∫≠p</h3>
                            <p id="total-import-value">0</p>
                        </div>
                        <div class="stats-card">
                            <h3>T·ªïng gi√° tr·ªã xu·∫•t</h3>
                            <p id="total-export-value">0</p>
                        </div>
                    </div>
                </div>

                <div class="transaction-filters">
                    <div class="search-box">
                        <input type="text" id="transaction-search" placeholder="T√¨m ki·∫øm giao d·ªãch...">
                    </div>
                    <div class="filter-group">
                        <select id="transaction-type-filter">
                            <option value="all">T·∫•t c·∫£ lo·∫°i</option>
                            <option value="import">Nh·∫≠p kho</option>
                            <option value="export">Xu·∫•t kho</option>
                        </select>
                        <select id="transaction-status-filter">
                            <option value="all">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                            <option value="pending">Ch·ªù x·ª≠ l√Ω</option>
                            <option value="completed">Ho√†n th√†nh</option>
                            <option value="cancelled">ƒê√£ h·ªßy</option>
                        </select>
                    </div>
                    <div class="date-filters">
                        <input type="date" id="transaction-start-date">
                        <span>ƒë·∫øn</span>
                        <input type="date" id="transaction-end-date">
                    </div>
                    <button onclick="resetTransactionFilters()" class="btn">
                        <i class="fas fa-redo"></i> ƒê·∫∑t l·∫°i
                    </button>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>M√£ GD</th>
                                <th>Lo·∫°i</th>
                                <th>Thi·∫øt b·ªã</th>
                                <th>S·ªë l∆∞·ª£ng</th>
                                <th>ƒê∆°n gi√°</th>
                                <th>Th√†nh ti·ªÅn</th>
                                <th>Ng√†y</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="transactions-table"></tbody>
                    </table>
                </div>
            </section>

            <!-- History Section -->
            <section id="history" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-history"></i> L·ªãch S·ª≠ Nh·∫≠p/Xu·∫•t Kho</h2>
                    <div class="header-actions">
                        <button onclick="addTransaction('import')" class="btn primary-btn">
                            <i class="fas fa-plus"></i> Nh·∫≠p kho
                        </button>
                        <button onclick="addTransaction('export')" class="btn primary-btn">
                            <i class="fas fa-minus"></i> Xu·∫•t kho
                        </button>
                    </div>
                </div>

                <div class="history-stats">
                    <div class="stats-cards">
                        <div class="stats-card">
                            <h3>Nh·∫≠p kho th√°ng n√†y</h3>
                            <p id="import-count">0</p>
                        </div>
                        <div class="stats-card">
                            <h3>Xu·∫•t kho th√°ng n√†y</h3>
                            <p id="export-count">0</p>
                        </div>
                        <div class="stats-card">
                            <h3>T·ªïng giao d·ªãch</h3>
                            <p id="total-transactions">0</p>
                        </div>
                    </div>
                </div>

                <div class="history-filters" id="history-filters">
                    <div class="search-box">
                        <input type="text" id="history-search" placeholder="T√¨m ki·∫øm..." 
                               onchange="applyHistoryFilters()">
                    </div>
                    <div class="filter-group">
                        <select id="transaction-type" onchange="applyHistoryFilters()">
                            <option value="all">T·∫•t c·∫£</option>
                            <option value="import">Nh·∫≠p kho</option>
                            <option value="export">Xu·∫•t kho</option>
                        </select>
                    </div>
                    <div class="date-filters">
                        <input type="date" id="start-date" onchange="applyHistoryFilters()">
                        <span>ƒë·∫øn</span>
                        <input type="date" id="end-date" onchange="applyHistoryFilters()">
                    </div>
                    <button onclick="resetHistoryFilters()" class="btn">
                        <i class="fas fa-redo"></i> ƒê·∫∑t l·∫°i
                    </button>
                </div>

                <div class="table-container">
                    <table id="history-table">
                        <thead>
                            <tr>
                                <th>M√£ GD</th>
                                <th>Lo·∫°i</th>
                                <th>Thi·∫øt b·ªã</th>
                                <th>S·ªë l∆∞·ª£ng</th>
                                <th>Ng√†y</th>
                                <th>Ng∆∞·ªùi th·ª±c hi·ªán</th>
                                <th>Ghi ch√∫</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody></tbody>
                    </table>
                </div>
            </section>

            <!-- Alerts Section -->
            <section id="alerts" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-bell"></i> C·∫£nh B√°o</h2>
                    <div class="header-actions">
                        <button onclick="markAllAlertsAsRead()" class="btn">
                            <i class="fas fa-check-double"></i> ƒê√°nh d·∫•u t·∫•t c·∫£ ƒë√£ ƒë·ªçc
                        </button>
                        <button onclick="showAlertSettings()" class="btn">
                            <i class="fas fa-cog"></i> C√†i ƒë·∫∑t
                        </button>
                    </div>
                </div>

                <div class="alerts-container">
                    <!-- Danh s√°ch c·∫£nh b√°o b√™n tr√°i -->
                    <div class="alerts-list">
                        <div class="alert-filters">
                            <div class="search-box">
                                <input type="text" id="alert-search" placeholder="T√¨m ki·∫øm c·∫£nh b√°o...">
                            </div>
                            <div class="filter-group">
                                <select id="alert-type-filter">
                                    <option value="all">T·∫•t c·∫£ lo·∫°i</option>
                                    <option value="low-stock">S·∫Øp h·∫øt h√†ng</option>
                                    <option value="inventory">T·ªìn kho</option>
                                    <option value="system">H·ªá th·ªëng</option>
                                </select>
                                <select id="alert-severity-filter">
                                    <option value="all">T·∫•t c·∫£ m·ª©c ƒë·ªô</option>
                                    <option value="high">Cao</option>
                                    <option value="medium">Trung b√¨nh</option>
                                    <option value="low">Th·∫•p</option>
                                </select>
                            </div>
                        </div>

                        <!-- Danh s√°ch c√°c c·∫£nh b√°o -->
                        <div id="alerts-list"></div>
                    </div>

                    <!-- Chi ti·∫øt c·∫£nh b√°o b√™n ph·∫£i -->
                    <div class="alert-detail-panel">
                        <div class="no-alert-selected">
                            <i class="fas fa-bell"></i>
                            <p>Ch·ªçn m·ªôt c·∫£nh b√°o ƒë·ªÉ xem chi ti·∫øt</p>
                        </div>
                        <div id="alert-detail-content" style="display: none;">
                            <!-- N·ªôi dung chi ti·∫øt s·∫Ω ƒë∆∞·ª£c ƒëi·ªÅn b·ªüi JavaScript -->
                            <div class="alert-detail-header">
                                <h3 class="alert-title"></h3>
                                <span class="alert-timestamp"></span>
                            </div>
                            <div class="alert-detail-body">
                                <div class="alert-info">
                                    <div class="info-group">
                                        <label>Lo·∫°i c·∫£nh b√°o:</label>
                                        <span class="alert-type"></span>
                                    </div>
                                    <div class="info-group">
                                        <label>M·ª©c ƒë·ªô:</label>
                                        <span class="alert-severity"></span>
                                    </div>
                                    <div class="info-group">
                                        <label>Thi·∫øt b·ªã:</label>
                                        <span class="alert-device"></span>
                                    </div>
                                    <div class="info-group">
                                        <label>Th√¥ng b√°o:</label>
                                        <p class="alert-message"></p>
                                    </div>
                                </div>
                                <div class="alert-actions">
                                    <button class="btn view-device-btn">
                                        <i class="fas fa-eye"></i> Xem thi·∫øt b·ªã
                                    </button>
                                    <button class="btn mark-read-btn">
                                        <i class="fas fa-check"></i> ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc
                                    </button>
                                </div>
                            </div>
                            <div class="alert-detail-footer">
                                <div class="related-alerts">
                                    <h4>C·∫£nh b√°o li√™n quan</h4>
                                    <div class="related-alerts-list">
                                        <!-- Danh s√°ch c·∫£nh b√°o li√™n quan -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Payments Section -->
            <section id="payments" class="section">
                <div class="section-header">
                    <h2><i class="fas fa-money-bill"></i> Thanh To√°n</h2>
                    <div class="header-actions">
                        <button onclick="createPayment()" class="btn primary-btn">
                            <i class="fas fa-plus"></i> T·∫°o thanh to√°n
                        </button>
                    </div>
                </div>

                <div class="payment-stats">
                    <div class="stats-cards">
                        <div class="stats-card">
                            <h3>T·ªïng thanh to√°n th√°ng n√†y</h3>
                            <p id="total-payments">0</p>
                        </div>
                        <div class="stats-card">
                            <h3>Ch·ªù thanh to√°n</h3>
                            <p id="pending-payments">0</p>
                        </div>
                        <div class="stats-card">
                            <h3>S·ªë giao d·ªãch</h3>
                            <p id="payment-count">0</p>
                        </div>
                    </div>
                </div>

                <div class="payment-filters">
                    <div class="search-box">
                        <input type="text" id="payment-search" placeholder="T√¨m ki·∫øm...">
                    </div>
                    <div class="filter-group">
                        <select id="payment-status-filter">
                            <option value="all">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                            <option value="pending">Ch·ªù thanh to√°n</option>
                            <option value="completed">ƒê√£ thanh to√°n</option>
                            <option value="cancelled">ƒê√£ h·ªßy</option>
                        </select>
                        <select id="payment-type-filter">
                            <option value="all">T·∫•t c·∫£ lo·∫°i</option>
                            <option value="import">Nh·∫≠p kho</option>
                            <option value="export">Xu·∫•t kho</option>
                        </select>
                        <select id="payment-method-filter">
                            <option value="all">T·∫•t c·∫£ ph∆∞∆°ng th·ª©c</option>
                            <option value="cash">Ti·ªÅn m·∫∑t</option>
                            <option value="bank_transfer">Chuy·ªÉn kho·∫£n</option>
                            <option value="credit_card">Th·∫ª t√≠n d·ª•ng</option>
                        </select>
                    </div>
                    <div class="date-filters">
                        <input type="date" id="payment-start-date">
                        <span>ƒë·∫øn</span>
                        <input type="date" id="payment-end-date">
                    </div>
                    <button onclick="resetPaymentFilters()" class="btn">
                        <i class="fas fa-redo"></i> ƒê·∫∑t l·∫°i
                    </button>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>M√£ thanh to√°n</th>
                                <th>Ng√†y</th>
                                <th>S·ªë ti·ªÅn</th>
                                <th>Tr·∫°ng th√°i</th>
                                <th>Thao t√°c</th>
                            </tr>
                        </thead>
                        <tbody id="payments-table"></tbody>
                    </table>
                </div>
            </section>

            <!-- Modal cho chi ti·∫øt thanh to√°n -->
            <div id="payment-detail-modal" class="modal"></div>

            <!-- Modal cho form thanh to√°n -->
            <div id="payment-form-modal" class="modal"></div>
        </main>
    </div>

    <!-- Device Form Modal -->
    <div id="device-form-modal" class="modal">
        <div class="modal-content">
            <h2 id="device-form-title">Th√™m thi·∫øt b·ªã m·ªõi</h2>
            <form id="device-form" onsubmit="handleDeviceSubmit(event)">
                <div class="form-group">
                    <label for="device-name">T√™n thi·∫øt b·ªã</label>
                    <input type="text" id="device-name" required>
                </div>
                <div class="form-group">
                    <label for="device-category">Danh m·ª•c</label>
                    <select id="device-category" required>
                        <option value="laptop">Laptop</option>
                        <option value="desktop">Desktop</option>
                        <option value="printer">M√°y in</option>
                        <option value="network">Thi·∫øt b·ªã m·∫°ng</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="device-quantity">S·ªë l∆∞·ª£ng</label>
                    <input type="number" id="device-quantity" min="0" required>
                </div>
                <div class="form-group">
                    <label for="device-price">ƒê∆°n gi√°</label>
                    <input type="number" id="device-price" min="0" required>
                </div>
                <div class="form-group">
                    <label for="device-threshold">Ng∆∞·ª°ng c·∫£nh b√°o</label>
                    <input type="number" id="device-threshold" min="1">
                </div>
                <div class="form-group">
                    <label for="device-description">M√¥ t·∫£</label>
                    <textarea id="device-description"></textarea>
                </div>
                <div class="form-actions">
                    <button type="submit" class="btn primary-btn">L∆∞u</button>
                    <button type="button" class="btn" onclick="closeDeviceForm()">H·ªßy</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Device Detail Modal -->
    <div id="device-detail-modal" class="modal">
        <div class="modal-content">
            <h2>Chi ti·∫øt thi·∫øt b·ªã</h2>
            <div class="device-detail-content"></div>
            <div class="modal-actions">
                <button class="btn" onclick="closeDeviceDetail()">ƒê√≥ng</button>
            </div>
        </div>
    </div>

    <!-- Alert Settings Modal -->
    <div id="alert-settings-modal" class="modal">
        <div class="modal-content">
            <h2>C√†i ƒë·∫∑t c·∫£nh b√°o</h2>
            <div class="alert-filters">
                <div class="filter-group">
                    <label>Lo·∫°i c·∫£nh b√°o:</label>
                    <select id="alert-type-filter">
                        <option value="all">T·∫•t c·∫£</option>
                        <option value="low-stock">H·∫øt h√†ng</option>
                        <option value="inventory">T·ªìn kho</option>
                        <option value="transaction">Giao d·ªãch</option>
                        <option value="system">H·ªá th·ªëng</option>
                    </select>
                </div>
                <div class="filter-group">
                    <label>M·ª©c ƒë·ªô:</label>
                    <select id="alert-severity-filter">
                        <option value="all">T·∫•t c·∫£</option>
                        <option value="high">Cao</option>
                        <option value="medium">Trung b√¨nh</option>
                        <option value="low">Th·∫•p</option>
                    </select>
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn primary-btn" onclick="saveAlertSettings()">L∆∞u</button>
                <button class="btn" onclick="closeAlertSettings()">H·ªßy</button>
            </div>
        </div>
    </div>

    <!-- Modal cho chi ti·∫øt l·ªãch s·ª≠ -->
    <div id="history-detail-modal" class="modal"></div>

    <!-- Modal cho nh·∫≠p/xu·∫•t kho -->
    <div id="transaction-modal" class="modal">
        <div class="modal-content">
            <h2><i class="fas fa-exchange-alt"></i> <span id="transaction-modal-title">Nh·∫≠p kho</span></h2>
            <form id="transaction-form" onsubmit="handleTransactionSubmit(event)">
                <div class="form-row">
                    <div class="form-group">
                        <label>Thi·∫øt b·ªã</label>
                        <select name="deviceId" required>
                            <option value="">Ch·ªçn thi·∫øt b·ªã</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>S·ªë l∆∞·ª£ng</label>
                        <input type="number" name="quantity" required min="1">
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>ƒê∆°n gi√°</label>
                        <input type="number" name="price" required min="0">
                    </div>
                    <div class="form-group">
                        <label>Th√†nh ti·ªÅn</label>
                        <input type="text" id="total-amount" readonly>
                    </div>
                </div>

                <div class="form-group">
                    <label>Ghi ch√∫</label>
                    <textarea name="note" rows="3"></textarea>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn primary-btn">
                        <i class="fas fa-save"></i> L∆∞u
                    </button>
                    <button type="button" onclick="closeModal('transaction-modal')" class="btn">
                        <i class="fas fa-times"></i> H·ªßy
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
